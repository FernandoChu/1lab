<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>1Lab.Univalence.SIP.Record.Parse</title><link rel="stylesheet" href="/css/agda-cats.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="1Lab.Univalence.SIP.Record.Base.html" class="Module">1Lab.Univalence.SIP.Record.Base</a>
<a id="45" class="Keyword">open</a> <a id="50" class="Keyword">import</a> <a id="57" href="1Lab.Univalence.SIP.Record.Prop.html" class="Module">1Lab.Univalence.SIP.Record.Prop</a>
<a id="89" class="Keyword">open</a> <a id="94" class="Keyword">import</a> <a id="101" href="1Lab.Univalence.SIP.Auto.html" class="Module">1Lab.Univalence.SIP.Auto</a>
<a id="126" class="Keyword">open</a> <a id="131" class="Keyword">import</a> <a id="138" href="1Lab.Univalence.SIP.html" class="Module">1Lab.Univalence.SIP</a>
<a id="158" class="Keyword">open</a> <a id="163" class="Keyword">import</a> <a id="170" href="1Lab.Reflection.html" class="Module">1Lab.Reflection</a>
<a id="186" class="Keyword">open</a> <a id="191" class="Keyword">import</a> <a id="198" href="1Lab.Type.Sigma.html" class="Module">1Lab.Type.Sigma</a>
<a id="214" class="Keyword">open</a> <a id="219" class="Keyword">import</a> <a id="226" href="1Lab.HLevel.html" class="Module">1Lab.HLevel</a>
<a id="238" class="Keyword">open</a> <a id="243" class="Keyword">import</a> <a id="250" href="1Lab.Equiv.html" class="Module">1Lab.Equiv</a>
<a id="261" class="Keyword">open</a> <a id="266" class="Keyword">import</a> <a id="273" href="1Lab.Type.html" class="Module">1Lab.Type</a>

<a id="284" class="Keyword">open</a> <a id="289" class="Keyword">import</a> <a id="296" href="Data.List.html" class="Module">Data.List</a>

<a id="307" class="Keyword">module</a> <a id="314" href="1Lab.Univalence.SIP.Record.Parse.html" class="Module">1Lab.Univalence.SIP.Record.Parse</a> <a id="347" class="Keyword">where</a>

<a id="findName"></a><a data-type="Term → TC Name" id="354" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="363" class="Symbol">:</a> <a data-type="Type" id="365" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="370" class="Symbol">→</a> <a data-type="Type a → Type a" id="372" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a data-type="Type" id="375" href="Agda.Builtin.Reflection.html#489" class="Postulate">Name</a>
<a data-type="Term → TC Name" id="380" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="389" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="390" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="394" href="1Lab.Univalence.SIP.Record.Parse.html#394" class="Bound">nm</a> <a id="397" class="Symbol">_)</a> <a id="400" class="Symbol">=</a> <a data-type="A → TC A" id="402" href="Agda.Builtin.Reflection.html#8261" class="Postulate">returnTC</a> <a id="411" href="1Lab.Univalence.SIP.Record.Parse.html#394" class="Bound">nm</a>
<a data-type="Term → TC Name" id="414" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="423" class="Symbol">(</a><a data-type="Visibility → Abs Term → Term" id="424" href="Agda.Builtin.Reflection.html#4960" class="InductiveConstructor">lam</a> <a data-type="Visibility" id="428" href="Agda.Builtin.Reflection.html#2771" class="InductiveConstructor">hidden</a> <a id="435" class="Symbol">(</a><a data-type="String → A → Abs A" id="436" href="Agda.Builtin.Reflection.html#3980" class="InductiveConstructor">abs</a> <a id="440" class="Symbol">_</a> <a id="442" href="1Lab.Univalence.SIP.Record.Parse.html#442" class="Bound">t</a><a id="443" class="Symbol">))</a> <a id="446" class="Symbol">=</a> <a data-type="Term → TC Name" id="448" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="457" href="1Lab.Univalence.SIP.Record.Parse.html#442" class="Bound">t</a>
<a data-type="Term → TC Name" id="459" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="CatchallClause Function">findName</a><a id="467" class="CatchallClause"> </a><a id="468" href="1Lab.Univalence.SIP.Record.Parse.html#468" class="CatchallClause Bound">t</a> <a id="470" class="Symbol">=</a> <a data-type="List ErrorPart → TC A" id="472" href="Agda.Builtin.Reflection.html#8431" class="Postulate">typeError</a> <a id="482" class="Symbol">(</a><a data-type="String → ErrorPart" id="483" href="Agda.Builtin.Reflection.html#7917" class="InductiveConstructor">strErr</a> <a id="490" class="String">&quot;The projections in a field descriptor must be record selectors: &quot;</a> <a data-type="A → List A → List A" id="557" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="Term → ErrorPart" id="559" href="Agda.Builtin.Reflection.html#7948" class="InductiveConstructor">termErr</a> <a id="567" href="1Lab.Univalence.SIP.Record.Parse.html#468" class="Bound">t</a> <a data-type="A → List A → List A" id="569" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="List A" id="571" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="573" class="Symbol">)</a>

<a id="parseFields"></a><a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="576" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="588" class="Symbol">:</a> <a data-type="Type" id="590" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="595" class="Symbol">→</a> <a data-type="Type" id="597" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="602" class="Symbol">→</a> <a data-type="Type" id="604" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="609" class="Symbol">→</a> <a data-type="Type a → Type a" id="611" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a id="614" class="Symbol">(</a><a data-type="Type a → Type a" id="615" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="620" class="Symbol">(</a><a data-type="Type" id="621" href="1Lab.Univalence.SIP.Record.Base.html#4940" class="Datatype">InternalField</a> <a data-type="Type a → Type b → Type (a ⊔ b)" id="635" href="1Lab.Type.html#1836" class="Function Operator">×</a> <a data-type="Type" id="637" href="1Lab.Univalence.SIP.Record.Base.html#4873" class="Record">TypedTm</a><a id="644" class="Symbol">))</a>
<a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="647" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="659" class="Symbol">_</a> <a id="661" class="Symbol">_</a> <a id="663" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="664" href="Agda.Builtin.Reflection.html#4846" class="InductiveConstructor">con</a> <a id="668" class="Symbol">(</a><a id="669" class="Keyword">quote</a> <a data-type="RecordFields R₁ ι" id="675" href="1Lab.Univalence.SIP.Record.Base.html#1806" class="InductiveConstructor">record:</a><a id="682" class="Symbol">)</a> <a id="684" class="Symbol">_)</a> <a id="687" class="Symbol">=</a> <a data-type="A → TC A" id="689" href="Agda.Builtin.Reflection.html#8261" class="Postulate">returnTC</a> <a data-type="List A" id="698" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="701" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="713" href="1Lab.Univalence.SIP.Record.Parse.html#713" class="Bound">s</a> <a id="715" href="1Lab.Univalence.SIP.Record.Parse.html#715" class="Bound">h</a> <a id="717" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="718" href="Agda.Builtin.Reflection.html#4846" class="InductiveConstructor">con</a> <a id="722" class="Symbol">(</a><a id="723" class="Keyword">quote</a> <a data-type="RecordFields R₁ ι →
(project : R₁ X → S₁ X) →
(ι A B e → ι&#39; (Σ-map₂ project A) (Σ-map₂ project B) e) →
RecordFields R₁ ι" id="729" href="1Lab.Univalence.SIP.Record.Base.html#1919" class="InductiveConstructor Operator">_field[_by_]</a><a id="741" class="Symbol">)</a> <a id="743" class="Symbol">(</a><a id="744" href="1Lab.Univalence.SIP.Record.Parse.html#744" class="Bound">ℓ</a> <a id="746" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="749" href="1Lab.Univalence.SIP.Record.Parse.html#749" class="Bound">ℓ₁</a> <a id="752" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="755" href="1Lab.Univalence.SIP.Record.Parse.html#755" class="Bound">ℓ₁&#39;</a> <a id="759" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="762" href="1Lab.Univalence.SIP.Record.Parse.html#762" class="Bound">R</a> <a id="764" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="767" href="1Lab.Univalence.SIP.Record.Parse.html#767" class="Bound">ι</a> <a id="769" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="772" href="1Lab.Univalence.SIP.Record.Parse.html#772" class="Bound">fs</a> <a id="775" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="778" href="1Lab.Univalence.SIP.Record.Parse.html#778" class="Bound">ℓ₂</a> <a id="781" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="784" href="1Lab.Univalence.SIP.Record.Parse.html#784" class="Bound">ℓ₂&#39;</a> <a id="788" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="791" href="1Lab.Univalence.SIP.Record.Parse.html#791" class="Bound">S</a> <a id="793" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="796" href="1Lab.Univalence.SIP.Record.Parse.html#796" class="Bound">ι&#39;</a> <a id="799" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="802" href="1Lab.Univalence.SIP.Record.Parse.html#802" class="Bound">sfieldTerm</a> <a id="813" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="816" href="1Lab.Univalence.SIP.Record.Parse.html#816" class="Bound">efieldTerm</a> <a id="827" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="830" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="832" class="Symbol">))</a>
  <a id="837" class="Symbol">=</a> <a id="839" class="Keyword">do</a> <a id="842" href="1Lab.Univalence.SIP.Record.Parse.html#842" class="Bound">ℓ</a> <a data-type="TC A → (A → TC B) → TC B" id="844" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Term → TC Term" id="846" href="Agda.Builtin.Reflection.html#8609" class="Postulate">reduce</a> <a id="853" href="1Lab.Univalence.SIP.Record.Parse.html#744" class="Bound">ℓ</a>
       <a id="862" href="1Lab.Univalence.SIP.Record.Parse.html#862" class="Bound">struct-field</a> <a data-type="TC A → (A → TC B) → TC B" id="875" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Term → TC Name" id="877" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="886" href="1Lab.Univalence.SIP.Record.Parse.html#802" class="Bound">sfieldTerm</a> 
       <a id="905" href="1Lab.Univalence.SIP.Record.Parse.html#905" class="Bound">pres-field</a> <a data-type="TC A → (A → TC B) → TC B" id="916" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Term → TC Name" id="918" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="927" href="1Lab.Univalence.SIP.Record.Parse.html#816" class="Bound">efieldTerm</a>

       <a id="946" href="1Lab.Univalence.SIP.Record.Parse.html#946" class="Bound">desc</a> <a data-type="TC A → (A → TC B) → TC B" id="951" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Term → TC Term" id="953" href="1Lab.Reflection.html#844" class="Function">newMeta</a> <a id="961" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="962" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="966" class="Symbol">(</a><a id="967" class="Keyword">quote</a> <a data-type="(ℓ ℓ₁ : Level) → (Type ℓ → Type ℓ₁) → Typeω" id="973" href="1Lab.Univalence.SIP.html#23978" class="Datatype">StrTm</a><a id="978" class="Symbol">)</a> <a id="980" class="Symbol">(</a><a id="981" href="1Lab.Univalence.SIP.Record.Parse.html#842" class="Bound">ℓ</a> <a id="983" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="986" href="1Lab.Univalence.SIP.Record.Parse.html#784" class="Bound">ℓ₂&#39;</a> <a id="990" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="993" href="1Lab.Univalence.SIP.Record.Parse.html#791" class="Bound">S</a> <a id="995" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="998" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1000" class="Symbol">))</a>
       <a data-type="⊤" id="1010" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a data-type="TC A → (A → TC B) → TC B" id="1013" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Nat → Term → TC ⊤" id="1015" href="1Lab.Univalence.SIP.Auto.html#358" class="Function">makeAutoStrTm</a> <a id="1029" class="Number">100</a> <a id="1033" href="1Lab.Univalence.SIP.Record.Parse.html#946" class="Bound">desc</a>

       <a id="1046" class="Keyword">let</a> <a id="1050" href="1Lab.Univalence.SIP.Record.Parse.html#1050" class="Bound">f</a> <a id="1052" class="Symbol">:</a> <a data-type="Type" id="1054" href="1Lab.Univalence.SIP.Record.Base.html#4940" class="Datatype">InternalField</a> <a data-type="Type a → Type b → Type (a ⊔ b)" id="1068" href="1Lab.Type.html#1836" class="Function Operator">×</a> <a data-type="Type" id="1070" href="1Lab.Univalence.SIP.Record.Base.html#4873" class="Record">TypedTm</a>
           <a id="1089" href="1Lab.Univalence.SIP.Record.Parse.html#1050" class="Bound">f</a> <a id="1091" class="Symbol">=</a> <a id="1093" class="Symbol">(</a><a data-type="Name → Name → InternalField" id="1094" href="1Lab.Univalence.SIP.Record.Base.html#4969" class="InductiveConstructor">structureField</a> <a id="1109" href="1Lab.Univalence.SIP.Record.Parse.html#862" class="Bound">struct-field</a> <a id="1122" href="1Lab.Univalence.SIP.Record.Parse.html#905" class="Bound">pres-field</a><a id="1132" class="Symbol">)</a>
             <a data-type="(fst₁ : A) (snd₁ : B fst₁) → ∑ A B" id="1147" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1149" class="Keyword">record</a> <a id="1156" class="Symbol">{</a> <a data-type="TypedTm → Term" id="1158" href="1Lab.Univalence.SIP.Record.Base.html#4902" class="Field">type</a> <a id="1163" class="Symbol">=</a> <a data-type="Name → List (Arg Term) → Term" id="1165" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="1169" class="Symbol">(</a><a id="1170" class="Keyword">quote</a> <a data-type="(tm : StrTm ℓ ℓ₁ S₁) → Type (lsuc ℓ ⊔ ℓ₁)" id="1176" href="1Lab.Univalence.SIP.Record.Base.html#4402" class="Function">tm→⌜isUnivalent⌝</a><a id="1192" class="Symbol">)</a> <a id="1194" class="Symbol">(</a><a id="1195" href="1Lab.Univalence.SIP.Record.Parse.html#946" class="Bound">desc</a> <a id="1200" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="1203" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1205" class="Symbol">)</a>
                      <a id="1229" class="Symbol">;</a> <a data-type="TypedTm → Term" id="1231" href="1Lab.Univalence.SIP.Record.Base.html#4922" class="Field">term</a> <a id="1236" class="Symbol">=</a> <a data-type="Name → List (Arg Term) → Term" id="1238" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="1242" class="Symbol">(</a><a id="1243" class="Keyword">quote</a> <a data-type="(tm : StrTm ℓ ℓ₁ S₁) → isUnivalent&#39; S₁ (tm→isHomT tm)" id="1249" href="1Lab.Univalence.SIP.Record.Base.html#4516" class="Function">tm→isUnivalent&#39;</a><a id="1264" class="Symbol">)</a> <a id="1266" class="Symbol">(</a><a id="1267" href="1Lab.Univalence.SIP.Record.Parse.html#946" class="Bound">desc</a> <a id="1272" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="1275" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1277" class="Symbol">)</a>
                      <a id="1301" class="Symbol">}</a>
       <a id="1310" href="1Lab.Univalence.SIP.Record.Parse.html#1310" class="Bound">rest</a> <a data-type="TC A → (A → TC B) → TC B" id="1315" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">&lt;-</a> <a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="1318" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="1330" href="1Lab.Univalence.SIP.Record.Parse.html#713" class="Bound">s</a> <a id="1332" href="1Lab.Univalence.SIP.Record.Parse.html#715" class="Bound">h</a> <a id="1334" href="1Lab.Univalence.SIP.Record.Parse.html#772" class="Bound">fs</a>
       <a data-type="A → TC A" id="1344" href="Agda.Builtin.Reflection.html#8261" class="Postulate">returnTC</a> <a id="1353" class="Symbol">(</a><a id="1354" href="1Lab.Univalence.SIP.Record.Parse.html#1050" class="Bound">f</a> <a data-type="A → List A → List A" id="1356" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1358" href="1Lab.Univalence.SIP.Record.Parse.html#1310" class="Bound">rest</a><a id="1362" class="Symbol">)</a>

<a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="1365" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="1377" href="1Lab.Univalence.SIP.Record.Parse.html#1377" class="Bound">strTerm</a> <a id="1385" href="1Lab.Univalence.SIP.Record.Parse.html#1385" class="Bound">homTerm</a> <a id="1393" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="1394" href="Agda.Builtin.Reflection.html#4846" class="InductiveConstructor">con</a> <a id="1398" class="Symbol">(</a><a id="1399" class="Keyword">quote</a> <a data-type="(previous-fields : RecordFields R₁ ι) →
((r : R₁ X) → P X (project-fields previous-fields r)) →
isPropProperty R₁ ι previous-fields P → RecordFields R₁ ι" id="1405" href="1Lab.Univalence.SIP.Record.Base.html#2683" class="InductiveConstructor Operator">_axiom[_by_]</a><a id="1417" class="Symbol">)</a>
            <a id="1431" class="Symbol">(</a><a id="1432" href="1Lab.Univalence.SIP.Record.Parse.html#1432" class="Bound">ℓ</a> <a id="1434" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="1437" href="1Lab.Univalence.SIP.Record.Parse.html#1437" class="Bound">ℓ₁</a> <a id="1440" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="1443" href="1Lab.Univalence.SIP.Record.Parse.html#1443" class="Bound">ℓ₁&#39;</a> <a id="1447" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="1450" href="1Lab.Univalence.SIP.Record.Parse.html#1450" class="Bound">R</a> <a id="1452" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="1455" href="1Lab.Univalence.SIP.Record.Parse.html#1455" class="Bound">ι</a> <a id="1457" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="1460" href="1Lab.Univalence.SIP.Record.Parse.html#1460" class="Bound">fs</a> <a id="1463" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="1466" href="1Lab.Univalence.SIP.Record.Parse.html#1466" class="Bound">ℓ₂</a> <a id="1469" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="1472" href="1Lab.Univalence.SIP.Record.Parse.html#1472" class="Bound">P</a> <a id="1474" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="1477" href="1Lab.Univalence.SIP.Record.Parse.html#1477" class="Bound">fieldTerm</a> <a id="1487" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="1490" href="1Lab.Univalence.SIP.Record.Parse.html#1490" class="Bound">is-prop</a> <a id="1498" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="1501" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1503" class="Symbol">))</a>
  <a id="1508" class="Symbol">=</a> <a id="1510" class="Keyword">do</a> <a id="1513" href="1Lab.Univalence.SIP.Record.Parse.html#1513" class="Bound">struct-field</a> <a data-type="TC A → (A → TC B) → TC B" id="1526" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Term → TC Name" id="1528" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="1537" href="1Lab.Univalence.SIP.Record.Parse.html#1477" class="Bound">fieldTerm</a> 
       <a id="1555" class="Keyword">let</a> <a id="1559" href="1Lab.Univalence.SIP.Record.Parse.html#1559" class="Bound">f</a> <a id="1561" class="Symbol">:</a> <a data-type="Type" id="1563" href="1Lab.Univalence.SIP.Record.Base.html#4940" class="Datatype">InternalField</a> <a data-type="Type a → Type b → Type (a ⊔ b)" id="1577" href="1Lab.Type.html#1836" class="Function Operator">×</a> <a data-type="Type" id="1579" href="1Lab.Univalence.SIP.Record.Base.html#4873" class="Record">TypedTm</a>
           <a id="1598" href="1Lab.Univalence.SIP.Record.Parse.html#1559" class="Bound">f</a> <a id="1600" class="Symbol">=</a> <a data-type="Name → InternalField" id="1602" href="1Lab.Univalence.SIP.Record.Base.html#5016" class="InductiveConstructor">propertyField</a> <a id="1616" href="1Lab.Univalence.SIP.Record.Parse.html#1513" class="Bound">struct-field</a>
             <a data-type="(fst₁ : A) (snd₁ : B fst₁) → ∑ A B" id="1642" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1644" class="Keyword">record</a> <a id="1651" class="Symbol">{</a> <a data-type="TypedTm → Term" id="1653" href="1Lab.Univalence.SIP.Record.Base.html#4902" class="Field">type</a> <a id="1658" class="Symbol">=</a> <a data-type="Name → List (Arg Term) → Term" id="1660" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="1664" class="Symbol">(</a><a id="1665" class="Keyword">quote</a> <a data-type="(R₁ : Type ℓ → Type ℓ₁) (ι : IsHomT ℓ₁&#39; R₁)
(fs : RecordFields R₁ ι)
(P : (X : Type ℓ) → fields→prod fs X → Type ℓ₂)
(f : (r : R₁ X) → P X (project-fields fs r)) →
Type (lsuc ℓ ⊔ ℓ₁ ⊔ ℓ₂ ⊔ level-of-fields→prod fs)" id="1671" href="1Lab.Univalence.SIP.Record.Prop.html#1438" class="Function">PropHelperType</a><a id="1685" class="Symbol">)</a>
                                  <a id="1721" class="Symbol">(</a><a id="1722" href="1Lab.Univalence.SIP.Record.Parse.html#1377" class="Bound">strTerm</a> <a id="1730" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="1733" href="1Lab.Univalence.SIP.Record.Parse.html#1385" class="Bound">homTerm</a> <a id="1741" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="1744" href="1Lab.Univalence.SIP.Record.Parse.html#1460" class="Bound">fs</a> <a id="1747" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="1750" href="1Lab.Univalence.SIP.Record.Parse.html#1472" class="Bound">P</a> <a id="1752" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="1755" href="1Lab.Univalence.SIP.Record.Parse.html#1477" class="Bound">fieldTerm</a> <a id="1765" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="1768" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1770" class="Symbol">)</a>
                      <a id="1794" class="Symbol">;</a> <a data-type="TypedTm → Term" id="1796" href="1Lab.Univalence.SIP.Record.Base.html#4922" class="Field">term</a> <a id="1801" class="Symbol">=</a> <a data-type="Name → List (Arg Term) → Term" id="1803" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="1807" class="Symbol">(</a><a id="1808" class="Keyword">quote</a> <a data-type="(R₁ : Type ℓ → Type ℓ₁) (ι : IsHomT ℓ₁&#39; R₁)
(fs : RecordFields R₁ ι)
(P : (X : Type ℓ) → fields→prod fs X → Type ℓ₂)
(f : (r : R₁ X) → P X (project-fields fs r)) →
isPropProperty R₁ ι fs P → PropHelperType R₁ ι fs P f" id="1814" href="1Lab.Univalence.SIP.Record.Prop.html#1551" class="Function">derivePropHelper</a><a id="1830" class="Symbol">)</a>
                                  <a id="1866" class="Symbol">(</a><a id="1867" href="1Lab.Univalence.SIP.Record.Parse.html#1377" class="Bound">strTerm</a> <a id="1875" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="1878" href="1Lab.Univalence.SIP.Record.Parse.html#1385" class="Bound">homTerm</a> <a id="1886" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="1889" href="1Lab.Univalence.SIP.Record.Parse.html#1460" class="Bound">fs</a> <a id="1892" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="1895" href="1Lab.Univalence.SIP.Record.Parse.html#1472" class="Bound">P</a> <a id="1897" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="1900" href="1Lab.Univalence.SIP.Record.Parse.html#1477" class="Bound">fieldTerm</a> <a id="1910" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="1913" href="1Lab.Univalence.SIP.Record.Parse.html#1490" class="Bound">is-prop</a> <a id="1921" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="1924" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1926" class="Symbol">)</a>
                      <a id="1950" class="Symbol">}</a>
       <a id="1959" href="1Lab.Univalence.SIP.Record.Parse.html#1959" class="Bound">rest</a> <a data-type="TC A → (A → TC B) → TC B" id="1964" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">&lt;-</a> <a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="1967" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="1979" href="1Lab.Univalence.SIP.Record.Parse.html#1377" class="Bound">strTerm</a> <a id="1987" href="1Lab.Univalence.SIP.Record.Parse.html#1385" class="Bound">homTerm</a> <a id="1995" href="1Lab.Univalence.SIP.Record.Parse.html#1460" class="Bound">fs</a>
       <a data-type="A → TC A" id="2005" href="Agda.Builtin.Reflection.html#8261" class="Postulate">returnTC</a> <a id="2014" class="Symbol">(</a><a id="2015" href="1Lab.Univalence.SIP.Record.Parse.html#1559" class="Bound">f</a> <a data-type="A → List A → List A" id="2017" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2019" href="1Lab.Univalence.SIP.Record.Parse.html#1959" class="Bound">rest</a><a id="2023" class="Symbol">)</a>

<a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="2026" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="CatchallClause Function">parseFields</a><a id="2037" class="CatchallClause"> </a><a id="2038" class="CatchallClause Symbol">_</a><a id="2039" class="CatchallClause"> </a><a id="2040" class="CatchallClause Symbol">_</a><a id="2041" class="CatchallClause"> </a><a id="2042" href="1Lab.Univalence.SIP.Record.Parse.html#2042" class="CatchallClause Bound">tm</a> <a id="2045" class="Symbol">=</a> <a data-type="List ErrorPart → TC A" id="2047" href="Agda.Builtin.Reflection.html#8431" class="Postulate">typeError</a> <a id="2057" class="Symbol">(</a><a data-type="Term → ErrorPart" id="2058" href="Agda.Builtin.Reflection.html#7948" class="InductiveConstructor">termErr</a> <a id="2066" href="1Lab.Univalence.SIP.Record.Parse.html#2042" class="Bound">tm</a> <a data-type="A → List A → List A" id="2069" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="String → ErrorPart" id="2071" href="Agda.Builtin.Reflection.html#7917" class="InductiveConstructor">strErr</a> <a id="2078" class="String">&quot; ← This is not a field descriptor!&quot;</a> <a data-type="A → List A → List A" id="2115" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="List A" id="2117" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2119" class="Symbol">)</a>

<a id="parseSpec"></a><a data-type="Term → TC (Spec TypedTm)" id="2122" href="1Lab.Univalence.SIP.Record.Parse.html#2122" class="Function">parseSpec</a> <a id="2132" class="Symbol">:</a> <a data-type="Type" id="2134" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="2139" class="Symbol">→</a> <a data-type="Type a → Type a" id="2141" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a id="2144" class="Symbol">(</a><a data-type="(A : Type) → Type" id="2145" href="1Lab.Univalence.SIP.Record.Base.html#5061" class="Record">Spec</a> <a data-type="Type" id="2150" href="1Lab.Univalence.SIP.Record.Base.html#4873" class="Record">TypedTm</a><a id="2157" class="Symbol">)</a>
<a data-type="Term → TC (Spec TypedTm)" id="2159" href="1Lab.Univalence.SIP.Record.Parse.html#2122" class="Function">parseSpec</a> <a id="2169" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="2170" href="Agda.Builtin.Reflection.html#4846" class="InductiveConstructor">con</a> <a id="2174" class="Symbol">(</a><a id="2175" class="Keyword">quote</a> <a data-type="(R₁ : Type ℓ → Type ℓ₁) (ι : IsHomT ℓ₁&#39; R₁) →
RecordFields R₁ ι → AutoRecord" id="2181" href="1Lab.Univalence.SIP.Record.Base.html#3830" class="InductiveConstructor">autoRecord</a><a id="2191" class="Symbol">)</a> <a id="2193" class="Symbol">(</a><a id="2194" href="1Lab.Univalence.SIP.Record.Parse.html#2194" class="Bound">ℓ</a> <a id="2196" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="2199" href="1Lab.Univalence.SIP.Record.Parse.html#2199" class="Bound">ℓ₁</a> <a id="2202" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="2205" href="1Lab.Univalence.SIP.Record.Parse.html#2205" class="Bound">ℓ₁&#39;</a> <a id="2209" href="1Lab.Reflection.html#1161" class="InductiveConstructor Operator">h∷</a> <a id="2212" href="1Lab.Univalence.SIP.Record.Parse.html#2212" class="Bound">strTerm</a> <a id="2220" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="2223" href="1Lab.Univalence.SIP.Record.Parse.html#2223" class="Bound">homTerm</a> <a id="2231" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a id="2234" href="1Lab.Univalence.SIP.Record.Parse.html#2234" class="Bound">fs</a> <a id="2237" href="1Lab.Reflection.html#1080" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="2240" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2242" class="Symbol">))</a> <a id="2245" class="Symbol">=</a>
  <a id="2249" class="Keyword">do</a> <a id="2252" href="1Lab.Univalence.SIP.Record.Parse.html#2252" class="Bound">fs&#39;</a> <a data-type="TC A → (A → TC B) → TC B" id="2256" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="2258" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="2270" href="1Lab.Univalence.SIP.Record.Parse.html#2212" class="Bound">strTerm</a> <a id="2278" href="1Lab.Univalence.SIP.Record.Parse.html#2223" class="Bound">homTerm</a> <a id="2286" href="1Lab.Univalence.SIP.Record.Parse.html#2234" class="Bound">fs</a>
     <a data-type="A → TC A" id="2294" href="Agda.Builtin.Reflection.html#8261" class="Postulate">returnTC</a> <a id="2303" class="Symbol">λ</a> <a id="2305" class="Symbol">{</a> <a id="2307" class="Symbol">.</a><a data-type="Spec A → Term" id="2308" href="1Lab.Univalence.SIP.Record.Base.html#5102" class="Field">Spec.structure</a> <a id="2323" class="Symbol">→</a> <a id="2325" href="1Lab.Univalence.SIP.Record.Parse.html#2212" class="Bound">strTerm</a>
                <a id="2349" class="Symbol">;</a> <a id="2351" class="Symbol">.</a><a data-type="Spec A → Term" id="2352" href="1Lab.Univalence.SIP.Record.Base.html#5126" class="Field">Spec.homomorphism</a> <a id="2370" class="Symbol">→</a> <a id="2372" href="1Lab.Univalence.SIP.Record.Parse.html#2223" class="Bound">homTerm</a>
                <a id="2396" class="Symbol">;</a> <a id="2398" class="Symbol">.</a><a data-type="Spec A → List (InternalField × A)" id="2399" href="1Lab.Univalence.SIP.Record.Base.html#5150" class="Field">Spec.fields</a> <a id="2411" class="Symbol">→</a> <a id="2413" href="1Lab.Univalence.SIP.Record.Parse.html#2252" class="Bound">fs&#39;</a>
                <a id="2433" class="Symbol">}</a>

<a data-type="Term → TC (Spec TypedTm)" id="2436" href="1Lab.Univalence.SIP.Record.Parse.html#2122" class="CatchallClause Function">parseSpec</a><a id="2445" class="CatchallClause"> </a><a id="2446" href="1Lab.Univalence.SIP.Record.Parse.html#2446" class="CatchallClause Bound">tm</a> <a id="2449" class="Symbol">=</a> <a data-type="List ErrorPart → TC A" id="2451" href="Agda.Builtin.Reflection.html#8431" class="Postulate">typeError</a> <a id="2461" class="Symbol">(</a><a data-type="Term → ErrorPart" id="2462" href="Agda.Builtin.Reflection.html#7948" class="InductiveConstructor">termErr</a> <a id="2470" href="1Lab.Univalence.SIP.Record.Parse.html#2446" class="Bound">tm</a> <a data-type="A → List A → List A" id="2473" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="String → ErrorPart" id="2475" href="Agda.Builtin.Reflection.html#7917" class="InductiveConstructor">strErr</a> <a id="2482" class="String">&quot; ← This is not an AutoRecord!&quot;</a> <a data-type="A → List A → List A" id="2514" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="List A" id="2516" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2518" class="Symbol">)</a>
</pre></body></html>
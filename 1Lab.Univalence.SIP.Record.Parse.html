<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>1Lab.Univalence.SIP.Record.Parse</title><link rel="stylesheet" href="/css/agda-cats.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="1Lab.Univalence.SIP.Record.Base.html" class="Module">1Lab.Univalence.SIP.Record.Base</a>
<a id="45" class="Keyword">open</a> <a id="50" class="Keyword">import</a> <a id="57" href="1Lab.Univalence.SIP.Record.Prop.html" class="Module">1Lab.Univalence.SIP.Record.Prop</a>
<a id="89" class="Keyword">open</a> <a id="94" class="Keyword">import</a> <a id="101" href="1Lab.Univalence.SIP.Auto.html" class="Module">1Lab.Univalence.SIP.Auto</a>
<a id="126" class="Keyword">open</a> <a id="131" class="Keyword">import</a> <a id="138" href="1Lab.Univalence.SIP.html" class="Module">1Lab.Univalence.SIP</a>
<a id="158" class="Keyword">open</a> <a id="163" class="Keyword">import</a> <a id="170" href="1Lab.Reflection.html" class="Module">1Lab.Reflection</a>
<a id="186" class="Keyword">open</a> <a id="191" class="Keyword">import</a> <a id="198" href="1Lab.Type.Sigma.html" class="Module">1Lab.Type.Sigma</a>
<a id="214" class="Keyword">open</a> <a id="219" class="Keyword">import</a> <a id="226" href="1Lab.HLevel.html" class="Module">1Lab.HLevel</a>
<a id="238" class="Keyword">open</a> <a id="243" class="Keyword">import</a> <a id="250" href="1Lab.Equiv.html" class="Module">1Lab.Equiv</a>
<a id="261" class="Keyword">open</a> <a id="266" class="Keyword">import</a> <a id="273" href="1Lab.Type.html" class="Module">1Lab.Type</a>

<a id="284" class="Keyword">open</a> <a id="289" class="Keyword">import</a> <a id="296" href="Data.List.html" class="Module">Data.List</a>

<a id="307" class="Keyword">module</a> <a id="314" href="1Lab.Univalence.SIP.Record.Parse.html" class="Module">1Lab.Univalence.SIP.Record.Parse</a> <a id="347" class="Keyword">where</a>

<a id="findName"></a><a data-type="Term → TC Name" id="354" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="363" class="Symbol">:</a> <a data-type="Type" id="365" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="370" class="Symbol">→</a> <a data-type="Type a → Type a" id="372" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a data-type="Type" id="375" href="Agda.Builtin.Reflection.html#489" class="Postulate">Name</a>
<a data-type="Term → TC Name" id="380" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="389" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="390" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="394" href="1Lab.Univalence.SIP.Record.Parse.html#394" class="Bound">nm</a> <a id="397" class="Symbol">_)</a> <a id="400" class="Symbol">=</a> <a data-type="A → TC A" id="402" href="Agda.Builtin.Reflection.html#8261" class="Postulate">returnTC</a> <a id="411" href="1Lab.Univalence.SIP.Record.Parse.html#394" class="Bound">nm</a>
<a data-type="Term → TC Name" id="414" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="423" class="Symbol">(</a><a data-type="Visibility → Abs Term → Term" id="424" href="Agda.Builtin.Reflection.html#4960" class="InductiveConstructor">lam</a> <a data-type="Visibility" id="428" href="Agda.Builtin.Reflection.html#2771" class="InductiveConstructor">hidden</a> <a id="435" class="Symbol">(</a><a data-type="String → A → Abs A" id="436" href="Agda.Builtin.Reflection.html#3980" class="InductiveConstructor">abs</a> <a id="440" class="Symbol">_</a> <a id="442" href="1Lab.Univalence.SIP.Record.Parse.html#442" class="Bound">t</a><a id="443" class="Symbol">))</a> <a id="446" class="Symbol">=</a> <a data-type="Term → TC Name" id="448" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="457" href="1Lab.Univalence.SIP.Record.Parse.html#442" class="Bound">t</a>
<a data-type="Term → TC Name" id="459" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="CatchallClause Function">findName</a><a id="467" class="CatchallClause"> </a><a id="468" href="1Lab.Univalence.SIP.Record.Parse.html#468" class="CatchallClause Bound">t</a> <a id="470" class="Symbol">=</a> <a data-type="List ErrorPart → TC A" id="472" href="Agda.Builtin.Reflection.html#8431" class="Postulate">typeError</a> <a id="482" class="Symbol">(</a><a data-type="String → ErrorPart" id="483" href="Agda.Builtin.Reflection.html#7917" class="InductiveConstructor">strErr</a> <a id="490" class="String">&quot;The projections in a field descriptor must be record selectors: &quot;</a> <a data-type="A → List A → List A" id="557" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="Term → ErrorPart" id="559" href="Agda.Builtin.Reflection.html#7948" class="InductiveConstructor">termErr</a> <a id="567" href="1Lab.Univalence.SIP.Record.Parse.html#468" class="Bound">t</a> <a data-type="A → List A → List A" id="569" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="List A" id="571" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="573" class="Symbol">)</a>

<a id="parseFields"></a><a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="576" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="588" class="Symbol">:</a> <a data-type="Type" id="590" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="595" class="Symbol">→</a> <a data-type="Type" id="597" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="602" class="Symbol">→</a> <a data-type="Type" id="604" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="609" class="Symbol">→</a> <a data-type="Type a → Type a" id="611" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a id="614" class="Symbol">(</a><a data-type="Type a → Type a" id="615" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="620" class="Symbol">(</a><a data-type="Type" id="621" href="1Lab.Univalence.SIP.Record.Base.html#4982" class="Datatype">InternalField</a> <a data-type="Type a → Type b → Type (a ⊔ b)" id="635" href="1Lab.Type.html#1846" class="Function Operator">×</a> <a data-type="Type" id="637" href="1Lab.Univalence.SIP.Record.Base.html#4915" class="Record">TypedTm</a><a id="644" class="Symbol">))</a>
<a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="647" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="659" class="Symbol">_</a> <a id="661" class="Symbol">_</a> <a id="663" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="664" href="Agda.Builtin.Reflection.html#4846" class="InductiveConstructor">con</a> <a id="668" class="Symbol">(</a><a id="669" class="Keyword">quote</a> <a data-type="RecordFields R₁ ι" id="675" href="1Lab.Univalence.SIP.Record.Base.html#1811" class="InductiveConstructor">record:</a><a id="682" class="Symbol">)</a> <a id="684" class="Symbol">_)</a> <a id="687" class="Symbol">=</a> <a data-type="A → TC A" id="689" href="Agda.Builtin.Reflection.html#8261" class="Postulate">returnTC</a> <a data-type="List A" id="698" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="701" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="713" href="1Lab.Univalence.SIP.Record.Parse.html#713" class="Bound">s</a> <a id="715" href="1Lab.Univalence.SIP.Record.Parse.html#715" class="Bound">h</a> <a id="717" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="718" href="Agda.Builtin.Reflection.html#4846" class="InductiveConstructor">con</a> <a id="722" class="Symbol">(</a><a id="723" class="Keyword">quote</a> <a data-type="RecordFields R₁ ι →
(project : R₁ X → S₁ X) →
(ι A B₁ e → ι&#39; (Σ-map₂ project A) (Σ-map₂ project B₁) e) →
RecordFields R₁ ι" id="729" href="1Lab.Univalence.SIP.Record.Base.html#1924" class="InductiveConstructor Operator">_field[_by_]</a><a id="741" class="Symbol">)</a> <a id="743" class="Symbol">(</a><a id="744" href="1Lab.Univalence.SIP.Record.Parse.html#744" class="Bound">ℓ</a> <a id="746" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="749" href="1Lab.Univalence.SIP.Record.Parse.html#749" class="Bound">ℓ₁</a> <a id="752" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="755" href="1Lab.Univalence.SIP.Record.Parse.html#755" class="Bound">ℓ₁&#39;</a> <a id="759" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="762" href="1Lab.Univalence.SIP.Record.Parse.html#762" class="Bound">R</a> <a id="764" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="767" href="1Lab.Univalence.SIP.Record.Parse.html#767" class="Bound">ι</a> <a id="769" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="772" href="1Lab.Univalence.SIP.Record.Parse.html#772" class="Bound">fs</a> <a id="775" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="778" href="1Lab.Univalence.SIP.Record.Parse.html#778" class="Bound">ℓ₂</a> <a id="781" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="784" href="1Lab.Univalence.SIP.Record.Parse.html#784" class="Bound">ℓ₂&#39;</a> <a id="788" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="791" href="1Lab.Univalence.SIP.Record.Parse.html#791" class="Bound">S</a> <a id="793" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="796" href="1Lab.Univalence.SIP.Record.Parse.html#796" class="Bound">ι&#39;</a> <a id="799" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="802" href="1Lab.Univalence.SIP.Record.Parse.html#802" class="Bound">sfieldTerm</a> <a id="813" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="816" href="1Lab.Univalence.SIP.Record.Parse.html#816" class="Bound">efieldTerm</a> <a id="827" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="830" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="832" class="Symbol">))</a>
  <a id="837" class="Symbol">=</a> <a id="839" class="Keyword">do</a> <a id="842" href="1Lab.Univalence.SIP.Record.Parse.html#842" class="Bound">ℓ</a> <a data-type="TC A → (A → TC B₁) → TC B₁" id="844" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Term → TC Term" id="846" href="Agda.Builtin.Reflection.html#8609" class="Postulate">reduce</a> <a id="853" href="1Lab.Univalence.SIP.Record.Parse.html#744" class="Bound">ℓ</a>
       <a id="862" href="1Lab.Univalence.SIP.Record.Parse.html#862" class="Bound">struct-field</a> <a data-type="TC A → (A → TC B₁) → TC B₁" id="875" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Term → TC Name" id="877" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="886" href="1Lab.Univalence.SIP.Record.Parse.html#802" class="Bound">sfieldTerm</a> 
       <a id="905" href="1Lab.Univalence.SIP.Record.Parse.html#905" class="Bound">pres-field</a> <a data-type="TC A → (A → TC B₁) → TC B₁" id="916" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Term → TC Name" id="918" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="927" href="1Lab.Univalence.SIP.Record.Parse.html#816" class="Bound">efieldTerm</a>

       <a id="946" href="1Lab.Univalence.SIP.Record.Parse.html#946" class="Bound">desc</a> <a data-type="TC A → (A → TC B₁) → TC B₁" id="951" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Term → TC Term" id="953" href="1Lab.Reflection.html#968" class="Function">newMeta</a> <a id="961" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="962" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="966" class="Symbol">(</a><a id="967" class="Keyword">quote</a> <a data-type="(ℓ ℓ₁ : Level) → (Type ℓ → Type ℓ₁) → Typeω" id="973" href="1Lab.Univalence.SIP.html#24240" class="Datatype">Str-term</a><a id="981" class="Symbol">)</a> <a id="983" class="Symbol">(</a><a id="984" href="1Lab.Univalence.SIP.Record.Parse.html#842" class="Bound">ℓ</a> <a id="986" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="989" href="1Lab.Univalence.SIP.Record.Parse.html#784" class="Bound">ℓ₂&#39;</a> <a id="993" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="996" href="1Lab.Univalence.SIP.Record.Parse.html#791" class="Bound">S</a> <a id="998" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="1001" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1003" class="Symbol">))</a>
       <a data-type="⊤" id="1013" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a data-type="TC A → (A → TC B₁) → TC B₁" id="1016" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Nat → Term → TC ⊤" id="1018" href="1Lab.Univalence.SIP.Auto.html#358" class="Function">makeAutoStr-term</a> <a id="1035" class="Number">100</a> <a id="1039" href="1Lab.Univalence.SIP.Record.Parse.html#946" class="Bound">desc</a>

       <a id="1052" class="Keyword">let</a> <a id="1056" href="1Lab.Univalence.SIP.Record.Parse.html#1056" class="Bound">f</a> <a id="1058" class="Symbol">:</a> <a data-type="Type" id="1060" href="1Lab.Univalence.SIP.Record.Base.html#4982" class="Datatype">InternalField</a> <a data-type="Type a → Type b → Type (a ⊔ b)" id="1074" href="1Lab.Type.html#1846" class="Function Operator">×</a> <a data-type="Type" id="1076" href="1Lab.Univalence.SIP.Record.Base.html#4915" class="Record">TypedTm</a>
           <a id="1095" href="1Lab.Univalence.SIP.Record.Parse.html#1056" class="Bound">f</a> <a id="1097" class="Symbol">=</a> <a id="1099" class="Symbol">(</a><a data-type="Name → Name → InternalField" id="1100" href="1Lab.Univalence.SIP.Record.Base.html#5011" class="InductiveConstructor">structureField</a> <a id="1115" href="1Lab.Univalence.SIP.Record.Parse.html#862" class="Bound">struct-field</a> <a id="1128" href="1Lab.Univalence.SIP.Record.Parse.html#905" class="Bound">pres-field</a><a id="1138" class="Symbol">)</a>
             <a data-type="(fst₁ : A) (snd₁ : B₁ fst₁) → ∑ A B₁" id="1153" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1155" class="Keyword">record</a> <a id="1162" class="Symbol">{</a> <a data-type="TypedTm → Term" id="1164" href="1Lab.Univalence.SIP.Record.Base.html#4944" class="Field">type</a> <a id="1169" class="Symbol">=</a> <a data-type="Name → List (Arg Term) → Term" id="1171" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="1175" class="Symbol">(</a><a id="1176" class="Keyword">quote</a> <a data-type="(tm : Str-term ℓ ℓ₁ S₁) → Type (lsuc ℓ ⊔ ℓ₁)" id="1182" href="1Lab.Univalence.SIP.Record.Base.html#4424" class="Function">tm→⌜is-univalent⌝</a><a id="1199" class="Symbol">)</a> <a id="1201" class="Symbol">(</a><a id="1202" href="1Lab.Univalence.SIP.Record.Parse.html#946" class="Bound">desc</a> <a id="1207" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="1210" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1212" class="Symbol">)</a>
                      <a id="1236" class="Symbol">;</a> <a data-type="TypedTm → Term" id="1238" href="1Lab.Univalence.SIP.Record.Base.html#4964" class="Field">term</a> <a id="1243" class="Symbol">=</a> <a data-type="Name → List (Arg Term) → Term" id="1245" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="1249" class="Symbol">(</a><a id="1250" class="Keyword">quote</a> <a data-type="(tm : Str-term ℓ ℓ₁ S₁) → is-univalent&#39; S₁ (tm→isHomT tm)" id="1256" href="1Lab.Univalence.SIP.Record.Base.html#4544" class="Function">tm→is-univalent&#39;</a><a id="1272" class="Symbol">)</a> <a id="1274" class="Symbol">(</a><a id="1275" href="1Lab.Univalence.SIP.Record.Parse.html#946" class="Bound">desc</a> <a id="1280" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="1283" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1285" class="Symbol">)</a>
                      <a id="1309" class="Symbol">}</a>
       <a id="1318" href="1Lab.Univalence.SIP.Record.Parse.html#1318" class="Bound">rest</a> <a data-type="TC A → (A → TC B₁) → TC B₁" id="1323" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">&lt;-</a> <a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="1326" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="1338" href="1Lab.Univalence.SIP.Record.Parse.html#713" class="Bound">s</a> <a id="1340" href="1Lab.Univalence.SIP.Record.Parse.html#715" class="Bound">h</a> <a id="1342" href="1Lab.Univalence.SIP.Record.Parse.html#772" class="Bound">fs</a>
       <a data-type="A → TC A" id="1352" href="Agda.Builtin.Reflection.html#8261" class="Postulate">returnTC</a> <a id="1361" class="Symbol">(</a><a id="1362" href="1Lab.Univalence.SIP.Record.Parse.html#1056" class="Bound">f</a> <a data-type="A → List A → List A" id="1364" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1366" href="1Lab.Univalence.SIP.Record.Parse.html#1318" class="Bound">rest</a><a id="1370" class="Symbol">)</a>

<a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="1373" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="1385" href="1Lab.Univalence.SIP.Record.Parse.html#1385" class="Bound">strTerm</a> <a id="1393" href="1Lab.Univalence.SIP.Record.Parse.html#1393" class="Bound">homTerm</a> <a id="1401" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="1402" href="Agda.Builtin.Reflection.html#4846" class="InductiveConstructor">con</a> <a id="1406" class="Symbol">(</a><a id="1407" class="Keyword">quote</a> <a data-type="(previous-fields : RecordFields R₁ ι) →
((r : R₁ X) → P X (project-fields previous-fields r)) →
is-prop-property R₁ ι previous-fields P → RecordFields R₁ ι" id="1413" href="1Lab.Univalence.SIP.Record.Base.html#2688" class="InductiveConstructor Operator">_axiom[_by_]</a><a id="1425" class="Symbol">)</a>
            <a id="1439" class="Symbol">(</a><a id="1440" href="1Lab.Univalence.SIP.Record.Parse.html#1440" class="Bound">ℓ</a> <a id="1442" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="1445" href="1Lab.Univalence.SIP.Record.Parse.html#1445" class="Bound">ℓ₁</a> <a id="1448" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="1451" href="1Lab.Univalence.SIP.Record.Parse.html#1451" class="Bound">ℓ₁&#39;</a> <a id="1455" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="1458" href="1Lab.Univalence.SIP.Record.Parse.html#1458" class="Bound">R</a> <a id="1460" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="1463" href="1Lab.Univalence.SIP.Record.Parse.html#1463" class="Bound">ι</a> <a id="1465" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="1468" href="1Lab.Univalence.SIP.Record.Parse.html#1468" class="Bound">fs</a> <a id="1471" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="1474" href="1Lab.Univalence.SIP.Record.Parse.html#1474" class="Bound">ℓ₂</a> <a id="1477" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="1480" href="1Lab.Univalence.SIP.Record.Parse.html#1480" class="Bound">P</a> <a id="1482" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="1485" href="1Lab.Univalence.SIP.Record.Parse.html#1485" class="Bound">fieldTerm</a> <a id="1495" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="1498" href="1Lab.Univalence.SIP.Record.Parse.html#1498" class="Bound">is-prop</a> <a id="1506" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="1509" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1511" class="Symbol">))</a>
  <a id="1516" class="Symbol">=</a> <a id="1518" class="Keyword">do</a> <a id="1521" href="1Lab.Univalence.SIP.Record.Parse.html#1521" class="Bound">struct-field</a> <a data-type="TC A → (A → TC B₁) → TC B₁" id="1534" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Term → TC Name" id="1536" href="1Lab.Univalence.SIP.Record.Parse.html#354" class="Function">findName</a> <a id="1545" href="1Lab.Univalence.SIP.Record.Parse.html#1485" class="Bound">fieldTerm</a> 
       <a id="1563" class="Keyword">let</a> <a id="1567" href="1Lab.Univalence.SIP.Record.Parse.html#1567" class="Bound">f</a> <a id="1569" class="Symbol">:</a> <a data-type="Type" id="1571" href="1Lab.Univalence.SIP.Record.Base.html#4982" class="Datatype">InternalField</a> <a data-type="Type a → Type b → Type (a ⊔ b)" id="1585" href="1Lab.Type.html#1846" class="Function Operator">×</a> <a data-type="Type" id="1587" href="1Lab.Univalence.SIP.Record.Base.html#4915" class="Record">TypedTm</a>
           <a id="1606" href="1Lab.Univalence.SIP.Record.Parse.html#1567" class="Bound">f</a> <a id="1608" class="Symbol">=</a> <a data-type="Name → InternalField" id="1610" href="1Lab.Univalence.SIP.Record.Base.html#5058" class="InductiveConstructor">propertyField</a> <a id="1624" href="1Lab.Univalence.SIP.Record.Parse.html#1521" class="Bound">struct-field</a>
             <a data-type="(fst₁ : A) (snd₁ : B₁ fst₁) → ∑ A B₁" id="1650" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1652" class="Keyword">record</a> <a id="1659" class="Symbol">{</a> <a data-type="TypedTm → Term" id="1661" href="1Lab.Univalence.SIP.Record.Base.html#4944" class="Field">type</a> <a id="1666" class="Symbol">=</a> <a data-type="Name → List (Arg Term) → Term" id="1668" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="1672" class="Symbol">(</a><a id="1673" class="Keyword">quote</a> <a data-type="(R₁ : Type ℓ → Type ℓ₁) (ι : IsHomT ℓ₁&#39; R₁)
(fs : RecordFields R₁ ι)
(P : (X : Type ℓ) → fields→prod fs X → Type ℓ₂)
(f : (r : R₁ X) → P X (project-fields fs r)) →
Type (lsuc ℓ ⊔ ℓ₁ ⊔ ℓ₂ ⊔ level-of-fields→prod fs)" id="1679" href="1Lab.Univalence.SIP.Record.Prop.html#1438" class="Function">PropHelperType</a><a id="1693" class="Symbol">)</a>
                                  <a id="1729" class="Symbol">(</a><a id="1730" href="1Lab.Univalence.SIP.Record.Parse.html#1385" class="Bound">strTerm</a> <a id="1738" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="1741" href="1Lab.Univalence.SIP.Record.Parse.html#1393" class="Bound">homTerm</a> <a id="1749" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="1752" href="1Lab.Univalence.SIP.Record.Parse.html#1468" class="Bound">fs</a> <a id="1755" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="1758" href="1Lab.Univalence.SIP.Record.Parse.html#1480" class="Bound">P</a> <a id="1760" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="1763" href="1Lab.Univalence.SIP.Record.Parse.html#1485" class="Bound">fieldTerm</a> <a id="1773" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="1776" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1778" class="Symbol">)</a>
                      <a id="1802" class="Symbol">;</a> <a data-type="TypedTm → Term" id="1804" href="1Lab.Univalence.SIP.Record.Base.html#4964" class="Field">term</a> <a id="1809" class="Symbol">=</a> <a data-type="Name → List (Arg Term) → Term" id="1811" href="Agda.Builtin.Reflection.html#4903" class="InductiveConstructor">def</a> <a id="1815" class="Symbol">(</a><a id="1816" class="Keyword">quote</a> <a data-type="(R₁ : Type ℓ → Type ℓ₁) (ι : IsHomT ℓ₁&#39; R₁)
(fs : RecordFields R₁ ι)
(P : (X : Type ℓ) → fields→prod fs X → Type ℓ₂)
(f : (r : R₁ X) → P X (project-fields fs r)) →
is-prop-property R₁ ι fs P → PropHelperType R₁ ι fs P f" id="1822" href="1Lab.Univalence.SIP.Record.Prop.html#1551" class="Function">derivePropHelper</a><a id="1838" class="Symbol">)</a>
                                  <a id="1874" class="Symbol">(</a><a id="1875" href="1Lab.Univalence.SIP.Record.Parse.html#1385" class="Bound">strTerm</a> <a id="1883" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="1886" href="1Lab.Univalence.SIP.Record.Parse.html#1393" class="Bound">homTerm</a> <a id="1894" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="1897" href="1Lab.Univalence.SIP.Record.Parse.html#1468" class="Bound">fs</a> <a id="1900" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="1903" href="1Lab.Univalence.SIP.Record.Parse.html#1480" class="Bound">P</a> <a id="1905" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="1908" href="1Lab.Univalence.SIP.Record.Parse.html#1485" class="Bound">fieldTerm</a> <a id="1918" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="1921" href="1Lab.Univalence.SIP.Record.Parse.html#1498" class="Bound">is-prop</a> <a id="1929" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="1932" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1934" class="Symbol">)</a>
                      <a id="1958" class="Symbol">}</a>
       <a id="1967" href="1Lab.Univalence.SIP.Record.Parse.html#1967" class="Bound">rest</a> <a data-type="TC A → (A → TC B₁) → TC B₁" id="1972" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">&lt;-</a> <a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="1975" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="1987" href="1Lab.Univalence.SIP.Record.Parse.html#1385" class="Bound">strTerm</a> <a id="1995" href="1Lab.Univalence.SIP.Record.Parse.html#1393" class="Bound">homTerm</a> <a id="2003" href="1Lab.Univalence.SIP.Record.Parse.html#1468" class="Bound">fs</a>
       <a data-type="A → TC A" id="2013" href="Agda.Builtin.Reflection.html#8261" class="Postulate">returnTC</a> <a id="2022" class="Symbol">(</a><a id="2023" href="1Lab.Univalence.SIP.Record.Parse.html#1567" class="Bound">f</a> <a data-type="A → List A → List A" id="2025" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2027" href="1Lab.Univalence.SIP.Record.Parse.html#1967" class="Bound">rest</a><a id="2031" class="Symbol">)</a>

<a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="2034" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="CatchallClause Function">parseFields</a><a id="2045" class="CatchallClause"> </a><a id="2046" class="CatchallClause Symbol">_</a><a id="2047" class="CatchallClause"> </a><a id="2048" class="CatchallClause Symbol">_</a><a id="2049" class="CatchallClause"> </a><a id="2050" href="1Lab.Univalence.SIP.Record.Parse.html#2050" class="CatchallClause Bound">tm</a> <a id="2053" class="Symbol">=</a> <a data-type="List ErrorPart → TC A" id="2055" href="Agda.Builtin.Reflection.html#8431" class="Postulate">typeError</a> <a id="2065" class="Symbol">(</a><a data-type="Term → ErrorPart" id="2066" href="Agda.Builtin.Reflection.html#7948" class="InductiveConstructor">termErr</a> <a id="2074" href="1Lab.Univalence.SIP.Record.Parse.html#2050" class="Bound">tm</a> <a data-type="A → List A → List A" id="2077" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="String → ErrorPart" id="2079" href="Agda.Builtin.Reflection.html#7917" class="InductiveConstructor">strErr</a> <a id="2086" class="String">&quot; ← This is not a field descriptor!&quot;</a> <a data-type="A → List A → List A" id="2123" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="List A" id="2125" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2127" class="Symbol">)</a>

<a id="parseSpec"></a><a data-type="Term → TC (Spec TypedTm)" id="2130" href="1Lab.Univalence.SIP.Record.Parse.html#2130" class="Function">parseSpec</a> <a id="2140" class="Symbol">:</a> <a data-type="Type" id="2142" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="2147" class="Symbol">→</a> <a data-type="Type a → Type a" id="2149" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a id="2152" class="Symbol">(</a><a data-type="(A : Type) → Type" id="2153" href="1Lab.Univalence.SIP.Record.Base.html#5103" class="Record">Spec</a> <a data-type="Type" id="2158" href="1Lab.Univalence.SIP.Record.Base.html#4915" class="Record">TypedTm</a><a id="2165" class="Symbol">)</a>
<a data-type="Term → TC (Spec TypedTm)" id="2167" href="1Lab.Univalence.SIP.Record.Parse.html#2130" class="Function">parseSpec</a> <a id="2177" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="2178" href="Agda.Builtin.Reflection.html#4846" class="InductiveConstructor">con</a> <a id="2182" class="Symbol">(</a><a id="2183" class="Keyword">quote</a> <a data-type="(R₁ : Type ℓ → Type ℓ₁) (ι : IsHomT ℓ₁&#39; R₁) →
RecordFields R₁ ι → AutoRecord" id="2189" href="1Lab.Univalence.SIP.Record.Base.html#3837" class="InductiveConstructor">record-desc</a><a id="2200" class="Symbol">)</a> <a id="2202" class="Symbol">(</a><a id="2203" href="1Lab.Univalence.SIP.Record.Parse.html#2203" class="Bound">ℓ</a> <a id="2205" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="2208" href="1Lab.Univalence.SIP.Record.Parse.html#2208" class="Bound">ℓ₁</a> <a id="2211" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="2214" href="1Lab.Univalence.SIP.Record.Parse.html#2214" class="Bound">ℓ₁&#39;</a> <a id="2218" href="1Lab.Reflection.html#1285" class="InductiveConstructor Operator">h∷</a> <a id="2221" href="1Lab.Univalence.SIP.Record.Parse.html#2221" class="Bound">strTerm</a> <a id="2229" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="2232" href="1Lab.Univalence.SIP.Record.Parse.html#2232" class="Bound">homTerm</a> <a id="2240" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="2243" href="1Lab.Univalence.SIP.Record.Parse.html#2243" class="Bound">fs</a> <a id="2246" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="2249" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2251" class="Symbol">))</a> <a id="2254" class="Symbol">=</a>
  <a id="2258" class="Keyword">do</a> <a id="2261" href="1Lab.Univalence.SIP.Record.Parse.html#2261" class="Bound">fs&#39;</a> <a data-type="TC A → (A → TC B₁) → TC B₁" id="2265" href="Agda.Builtin.Reflection.html#8311" class="Postulate Operator">←</a> <a data-type="Term → Term → Term → TC (List (InternalField × TypedTm))" id="2267" href="1Lab.Univalence.SIP.Record.Parse.html#576" class="Function">parseFields</a> <a id="2279" href="1Lab.Univalence.SIP.Record.Parse.html#2221" class="Bound">strTerm</a> <a id="2287" href="1Lab.Univalence.SIP.Record.Parse.html#2232" class="Bound">homTerm</a> <a id="2295" href="1Lab.Univalence.SIP.Record.Parse.html#2243" class="Bound">fs</a>
     <a data-type="A → TC A" id="2303" href="Agda.Builtin.Reflection.html#8261" class="Postulate">returnTC</a> <a id="2312" class="Symbol">λ</a> <a id="2314" class="Symbol">{</a> <a id="2316" class="Symbol">.</a><a data-type="Spec A → Term" id="2317" href="1Lab.Univalence.SIP.Record.Base.html#5144" class="Field">Spec.structure</a> <a id="2332" class="Symbol">→</a> <a id="2334" href="1Lab.Univalence.SIP.Record.Parse.html#2221" class="Bound">strTerm</a>
                <a id="2358" class="Symbol">;</a> <a id="2360" class="Symbol">.</a><a data-type="Spec A → Term" id="2361" href="1Lab.Univalence.SIP.Record.Base.html#5168" class="Field">Spec.homomorphism</a> <a id="2379" class="Symbol">→</a> <a id="2381" href="1Lab.Univalence.SIP.Record.Parse.html#2232" class="Bound">homTerm</a>
                <a id="2405" class="Symbol">;</a> <a id="2407" class="Symbol">.</a><a data-type="Spec A → List (InternalField × A)" id="2408" href="1Lab.Univalence.SIP.Record.Base.html#5192" class="Field">Spec.fields</a> <a id="2420" class="Symbol">→</a> <a id="2422" href="1Lab.Univalence.SIP.Record.Parse.html#2261" class="Bound">fs&#39;</a>
                <a id="2442" class="Symbol">}</a>

<a data-type="Term → TC (Spec TypedTm)" id="2445" href="1Lab.Univalence.SIP.Record.Parse.html#2130" class="CatchallClause Function">parseSpec</a><a id="2454" class="CatchallClause"> </a><a id="2455" href="1Lab.Univalence.SIP.Record.Parse.html#2455" class="CatchallClause Bound">tm</a> <a id="2458" class="Symbol">=</a> <a data-type="List ErrorPart → TC A" id="2460" href="Agda.Builtin.Reflection.html#8431" class="Postulate">typeError</a> <a id="2470" class="Symbol">(</a><a data-type="Term → ErrorPart" id="2471" href="Agda.Builtin.Reflection.html#7948" class="InductiveConstructor">termErr</a> <a id="2479" href="1Lab.Univalence.SIP.Record.Parse.html#2455" class="Bound">tm</a> <a data-type="A → List A → List A" id="2482" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="String → ErrorPart" id="2484" href="Agda.Builtin.Reflection.html#7917" class="InductiveConstructor">strErr</a> <a id="2491" class="String">&quot; ← This is not an AutoRecord!&quot;</a> <a data-type="A → List A → List A" id="2523" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="List A" id="2525" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2527" class="Symbol">)</a>
</pre></body></html>
<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>1Lab.Univalence.SIP.Auto</title><link rel="stylesheet" href="/css/agda-cats.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="1Lab.Univalence.SIP.html" class="Module">1Lab.Univalence.SIP</a>
<a id="33" class="Keyword">open</a> <a id="38" class="Keyword">import</a> <a id="45" href="1Lab.Reflection.html" class="Module">1Lab.Reflection</a>
<a id="61" class="Keyword">open</a> <a id="66" class="Keyword">import</a> <a id="73" href="1Lab.Type.Sigma.html" class="Module">1Lab.Type.Sigma</a>
<a id="89" class="Keyword">open</a> <a id="94" class="Keyword">import</a> <a id="101" href="1Lab.Univalence.html" class="Module">1Lab.Univalence</a>
<a id="117" class="Keyword">open</a> <a id="122" class="Keyword">import</a> <a id="129" href="1Lab.Equiv.html" class="Module">1Lab.Equiv</a>
<a id="140" class="Keyword">open</a> <a id="145" class="Keyword">import</a> <a id="152" href="1Lab.Path.html" class="Module">1Lab.Path</a>
<a id="162" class="Keyword">open</a> <a id="167" class="Keyword">import</a> <a id="174" href="1Lab.Type.html" class="Module">1Lab.Type</a>

<a id="185" class="Keyword">module</a> <a id="192" href="1Lab.Univalence.SIP.Auto.html" class="Module">1Lab.Univalence.SIP.Auto</a> <a id="217" class="Keyword">where</a>

<a id="224" class="Keyword">open</a> <a id="229" class="Keyword">import</a> <a id="236" href="Agda.Builtin.Reflection.html" class="Module">Agda.Builtin.Reflection</a>
  <a id="262" class="Keyword">renaming</a> <a id="271" class="Symbol">(</a> <a data-type="TC A → (A → TC B₁) → TC B₁" id="273" href="Agda.Builtin.Reflection.html#8311" class="Postulate">bindTC</a> <a id="280" class="Symbol">to</a> <a id="283" class="Postulate">_&gt;&gt;=_</a>
           <a id="300" class="Symbol">;</a> <a data-type="TC A → TC A → TC A" id="302" href="Agda.Builtin.Reflection.html#8645" class="Postulate">catchTC</a> <a id="310" class="Symbol">to</a> <a id="313" class="Keyword">infixr</a> <a id="320" class="Number">8</a> <a id="322" class="Postulate">_&lt;|&gt;_</a>
           <a id="339" class="Symbol">)</a>
  <a id="343" class="Keyword">hiding</a> <a id="350" class="Symbol">(</a><a data-type="Type" id="351" href="Agda.Builtin.Reflection.html#4759" class="Function">Type</a><a id="355" class="Symbol">)</a>

<a id="makeAutoStr-term"></a><a data-type="Nat → Term → TC ⊤" id="358" href="1Lab.Univalence.SIP.Auto.html#358" class="Function">makeAutoStr-term</a> <a id="375" class="Symbol">:</a> <a data-type="Type" id="377" href="Agda.Builtin.Nat.html#192" class="Datatype">Nat</a> <a id="381" class="Symbol">→</a> <a data-type="Type" id="383" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="388" class="Symbol">→</a> <a data-type="Type a → Type a" id="390" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a data-type="Type" id="393" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
<a data-type="Nat → Term → TC ⊤" id="395" href="1Lab.Univalence.SIP.Auto.html#358" class="Function">makeAutoStr-term</a> <a data-type="Nat" id="412" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="417" href="1Lab.Univalence.SIP.Auto.html#417" class="Bound">t</a> <a id="419" class="Symbol">=</a> <a data-type="List ErrorPart → TC A" id="421" href="Agda.Builtin.Reflection.html#8431" class="Postulate">typeError</a> <a id="431" class="Symbol">(</a><a data-type="String → ErrorPart" id="432" href="Agda.Builtin.Reflection.html#7917" class="InductiveConstructor">strErr</a> <a id="439" class="String">&quot;autoDesc ran out of fuel&quot;</a> <a data-type="A → List A → List A" id="466" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a data-type="List A" id="468" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="470" class="Symbol">)</a>
<a data-type="Nat → Term → TC ⊤" id="472" href="1Lab.Univalence.SIP.Auto.html#358" class="Function">makeAutoStr-term</a> <a id="489" class="Symbol">(</a><a data-type="Nat → Nat" id="490" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="494" href="1Lab.Univalence.SIP.Auto.html#494" class="Bound">n</a><a id="495" class="Symbol">)</a> <a id="497" href="1Lab.Univalence.SIP.Auto.html#497" class="Bound">t</a> <a id="499" class="Symbol">=</a>
  <a id="503" href="1Lab.Univalence.SIP.Auto.html#597" class="Function">tryPoint</a>
    <a id="516" href="1Lab.Univalence.SIP.Auto.html#322" class="Postulate Operator">&lt;|&gt;</a> <a id="520" href="1Lab.Univalence.SIP.Auto.html#650" class="Function">tryBin</a> <a id="527" class="Symbol">(</a><a id="528" class="Keyword">quote</a> <a data-type="Str-term ℓ ℓ₁ S₁ →
Str-term ℓ ℓ₂ T → Str-term ℓ (ℓ₁ ⊔ ℓ₂) (λ X → S₁ X → T X)" id="534" href="1Lab.Univalence.SIP.html#24383" class="InductiveConstructor Operator">_s→_</a><a id="538" class="Symbol">)</a>
    <a id="544" href="1Lab.Univalence.SIP.Auto.html#322" class="Postulate Operator">&lt;|&gt;</a> <a id="548" href="1Lab.Univalence.SIP.Auto.html#650" class="Function">tryBin</a> <a id="555" class="Symbol">(</a><a id="556" class="Keyword">quote</a> <a data-type="Str-term ℓ ℓ₁ S₁ →
Str-term ℓ ℓ₂ T → Str-term ℓ (ℓ₁ ⊔ ℓ₂) (λ X → S₁ X × T X)" id="562" href="1Lab.Univalence.SIP.html#24494" class="InductiveConstructor Operator">_s×_</a><a id="566" class="Symbol">)</a>
    <a id="572" href="1Lab.Univalence.SIP.Auto.html#322" class="Postulate Operator">&lt;|&gt;</a> <a id="576" href="1Lab.Univalence.SIP.Auto.html#861" class="Function">useConst</a>
  <a id="587" class="Keyword">where</a>
    <a id="597" href="1Lab.Univalence.SIP.Auto.html#597" class="Function">tryPoint</a> <a id="606" class="Symbol">=</a> <a id="608" class="Keyword">do</a>
      <a data-type="Term → Term → TC ⊤" id="617" href="Agda.Builtin.Reflection.html#8391" class="Postulate">unify</a> <a id="623" href="1Lab.Univalence.SIP.Auto.html#497" class="Bound">t</a> <a id="625" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="626" href="Agda.Builtin.Reflection.html#4846" class="InductiveConstructor">con</a> <a id="630" class="Symbol">(</a><a id="631" class="Keyword">quote</a> <a data-type="Str-term ℓ ℓ (λ X → X)" id="637" href="1Lab.Univalence.SIP.html#24352" class="InductiveConstructor">s∙</a><a id="639" class="Symbol">)</a> <a data-type="List A" id="641" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="643" class="Symbol">)</a>

    <a id="650" href="1Lab.Univalence.SIP.Auto.html#650" class="Function">tryBin</a> <a id="657" class="Symbol">:</a> <a data-type="Type" id="659" href="Agda.Builtin.Reflection.html#489" class="Postulate">Name</a> <a id="664" class="Symbol">→</a> <a data-type="Type a → Type a" id="666" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a data-type="Type" id="669" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
    <a id="675" href="1Lab.Univalence.SIP.Auto.html#650" class="Function">tryBin</a> <a id="682" href="1Lab.Univalence.SIP.Auto.html#682" class="Bound">namen</a> <a id="688" class="Symbol">=</a> <a id="690" class="Keyword">do</a>
      <a id="699" href="1Lab.Univalence.SIP.Auto.html#699" class="Bound">h1</a> <a id="702" href="1Lab.Univalence.SIP.Auto.html#283" class="Postulate Operator">←</a> <a data-type="Term → TC Term" id="704" href="1Lab.Reflection.html#968" class="Function">newMeta</a> <a data-type="Term" id="712" href="Agda.Builtin.Reflection.html#5246" class="InductiveConstructor">unknown</a>
      <a id="726" href="1Lab.Univalence.SIP.Auto.html#726" class="Bound">h2</a> <a id="729" href="1Lab.Univalence.SIP.Auto.html#283" class="Postulate Operator">←</a> <a data-type="Term → TC Term" id="731" href="1Lab.Reflection.html#968" class="Function">newMeta</a> <a data-type="Term" id="739" href="Agda.Builtin.Reflection.html#5246" class="InductiveConstructor">unknown</a>
      <a data-type="⊤" id="753" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="756" href="1Lab.Univalence.SIP.Auto.html#283" class="Postulate Operator">←</a> <a data-type="Term → Term → TC ⊤" id="758" href="Agda.Builtin.Reflection.html#8391" class="Postulate">unify</a> <a id="764" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="765" href="Agda.Builtin.Reflection.html#4846" class="InductiveConstructor">con</a> <a id="769" href="1Lab.Univalence.SIP.Auto.html#682" class="Bound">namen</a> <a id="775" class="Symbol">(</a><a id="776" href="1Lab.Univalence.SIP.Auto.html#699" class="Bound">h1</a> <a id="779" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a id="782" href="1Lab.Univalence.SIP.Auto.html#726" class="Bound">h2</a> <a id="785" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="788" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="790" class="Symbol">))</a> <a id="793" href="1Lab.Univalence.SIP.Auto.html#497" class="Bound">t</a>
      <a data-type="⊤" id="801" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="804" href="1Lab.Univalence.SIP.Auto.html#283" class="Postulate Operator">←</a> <a data-type="Nat → Term → TC ⊤" id="806" href="1Lab.Univalence.SIP.Auto.html#358" class="Function">makeAutoStr-term</a> <a id="823" href="1Lab.Univalence.SIP.Auto.html#494" class="Bound">n</a> <a id="825" href="1Lab.Univalence.SIP.Auto.html#699" class="Bound">h1</a>
      <a data-type="Nat → Term → TC ⊤" id="834" href="1Lab.Univalence.SIP.Auto.html#358" class="Function">makeAutoStr-term</a> <a id="851" href="1Lab.Univalence.SIP.Auto.html#494" class="Bound">n</a> <a id="853" href="1Lab.Univalence.SIP.Auto.html#726" class="Bound">h2</a>

    <a id="861" href="1Lab.Univalence.SIP.Auto.html#861" class="Function">useConst</a> <a id="870" class="Symbol">=</a> <a id="872" class="Keyword">do</a>
      <a data-type="Term → Term → TC ⊤" id="881" href="Agda.Builtin.Reflection.html#8391" class="Postulate">unify</a> <a id="887" href="1Lab.Univalence.SIP.Auto.html#497" class="Bound">t</a> <a id="889" class="Symbol">(</a><a data-type="Name → List (Arg Term) → Term" id="890" href="Agda.Builtin.Reflection.html#4846" class="InductiveConstructor">con</a> <a id="894" class="Symbol">(</a><a id="895" class="Keyword">quote</a> <a data-type="(A : Type ℓ₁) → Str-term ℓ ℓ₁ (λ X → A)" id="901" href="1Lab.Univalence.SIP.html#24293" class="InductiveConstructor">s-const</a><a id="908" class="Symbol">)</a> <a id="910" class="Symbol">(</a><a data-type="Term" id="911" href="Agda.Builtin.Reflection.html#5246" class="InductiveConstructor">unknown</a> <a id="919" href="1Lab.Reflection.html#1204" class="InductiveConstructor Operator">v∷</a> <a data-type="List A" id="922" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="924" class="Symbol">))</a>

<a id="928" class="Keyword">macro</a>
  <a id="auto-str-term"></a><a data-type="Term → TC ⊤" id="936" href="1Lab.Univalence.SIP.Auto.html#936" class="Function">auto-str-term</a> <a id="950" class="Symbol">:</a> <a data-type="Type" id="952" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="957" class="Symbol">→</a> <a data-type="Type a → Type a" id="959" href="Agda.Builtin.Reflection.html#8218" class="Postulate">TC</a> <a data-type="Type" id="962" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
  <a data-type="Term → TC ⊤" id="966" href="1Lab.Univalence.SIP.Auto.html#936" class="Function">auto-str-term</a> <a id="980" class="Symbol">=</a> <a data-type="Nat → Term → TC ⊤" id="982" href="1Lab.Univalence.SIP.Auto.html#358" class="Function">makeAutoStr-term</a> <a id="999" class="Number">100</a>
</pre></body></html>